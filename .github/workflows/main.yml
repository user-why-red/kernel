name: Build Kernel

on: workflow_dispatch
jobs:
  build:
    runs-on: ubuntu-22.04
    steps:
    - name: Checkout kernel source
      uses: actions/checkout@v4
      with:
        submodules: 'true'
        
    - name: firebuild
      uses: firebuild/firebuild-action@v4
      
    - name: Install Dependencies
      run:  sudo apt-get update && apt-get install -y bison build-essential bc bison curl libssl-dev git zip python python3 flex cpio libncurses5-dev wget default-jre 
 
    - name: Whyred kernel build
      run: ./build.sh whyred

    - name: Upload whyred kernel build
      run:  curl --upload-file out/arch/arm64/boot/Image.gz-dtb https://transfer.sh

    - name: Tulip kernel build
      run: ./build.sh tulip

    - name: Upload tulip kernel build
      run:  curl --upload-file out/arch/arm64/boot/Image.gz-dtb https://transfer.sh
